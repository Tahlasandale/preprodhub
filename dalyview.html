<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vue du Jour</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
    * {margin: 0; padding: 0; box-sizing: border-box;}

    body {
        font-family: 'Orbitron', monospace;
        background: #0a0a0a;
        color: #00ff41;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        padding: 20px;
        background-image:
            radial-gradient(circle at 25% 25%, #ff006620 0%, transparent 50%),
            radial-gradient(circle at 75% 75%, #00ff4120 0%, transparent 50%),
            linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
        overflow-x: hidden;
        position: relative;
    }

    /* Scanlines */
    body::after {
        content: '';
        position: fixed; inset: 0;
        background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,255,65,0.03) 2px, rgba(0,255,65,0.03) 4px);
        pointer-events: none; z-index: 1000;
    }

    h1 {
        text-align: center; margin-bottom: 10px; color: #00ff41;
        font-weight: 900; letter-spacing: 3px; text-transform: uppercase;
        text-shadow: 0 0 10px #00ff41, 0 0 20px #00ff4180, 0 0 40px #00ff4160;
    }

    .current-time { 
        text-align: center;
        font-size: 3rem;
        color: #ff0066;
        margin-bottom: 18px;
        font-weight: 900;
        letter-spacing: 4px;
        text-shadow: 0 0 15px #ff0066, 0 0 30px rgba(255,0,102,.5);
    }

    .progress-container {
        width: 100%;
        height: 26px;
        background: linear-gradient(135deg, #1a1a1a, #0f0f0f);
        border: 2px solid #00ff41;
        clip-path: polygon(20px 0%, 100% 0%, calc(100% - 20px) 100%, 0% 100%);
        margin-bottom: 24px;
        box-shadow: 0 10px 30px rgba(0,255,65,.2), inset 0 0 20px rgba(0,255,65,.08);
    }

    .progress-bar {
        height: 100%;
        width: 0;
        background: linear-gradient(90deg, #ff0066, #ffff00, #00ff41);
        transition: width 0.5s ease;
        box-shadow: inset 0 0 12px rgba(0,0,0,.25);
    }

    .current-activity {
        background: linear-gradient(135deg, #1a1a1a, #0f0f0f);
        border: 2px solid #00ff41;
        clip-path: polygon(20px 0%, 100% 0%, calc(100% - 20px) 100%, 0% 100%);
        padding: 20px;
        box-shadow: 0 10px 30px rgba(0,255,65,.2), inset 0 0 20px rgba(0,255,65,.08);
        margin-bottom: 24px;
        text-align: center;
        transition: background 0.3s ease;
    }

    .current-activity h2 { margin-bottom: 10px; color: #00ff41; font-weight: 900; letter-spacing: 2px; text-transform: uppercase; text-shadow: 0 0 10px #00ff4180; }
    .current-activity p { font-size: 18px; color: #ffff00; font-weight: 700; text-shadow: 0 0 10px rgba(255,255,0,.5); }

    .timeline { display: none; flex-direction: column; gap: 12px; margin-bottom: 24px; }

    .timeline-item, .widget-container, .planning-button, .toggle-button {
        background: linear-gradient(135deg, #2a2a2a, #1f1f1f);
        border-left: 3px solid #ffff00;
        padding: 14px 18px;
        display: flex;
        justify-content: center;
        align-items: center;
        text-align: center;
        transition: transform 0.3s ease, background 0.3s ease, border-color .2s ease;
        margin-bottom: 12px;
        clip-path: polygon(15px 0%, 100% 0%, calc(100% - 15px) 100%, 0% 100%);
    }

    .timeline-item:hover, .planning-button:hover, .toggle-button:hover { background: linear-gradient(135deg, #2e2e2e, #242424); transform: translateY(-3px); box-shadow: 0 0 20px rgba(255,255,0,.12); border-left-color: #ff0066; }

    .planning-button { 
        display: block;
        color: #ffff00;
        font-weight: 900;
        text-decoration: none;
        margin: 0 auto 24px auto;
        background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
        border: 1px solid #ffff00;
        clip-path: polygon(10px 0%, 100% 0%, calc(100% - 10px) 100%, 0% 100%);
    }

    .widget-container iframe { width: 100%; height: 240px; border: 2px solid #00ff41; clip-path: polygon(20px 0%, 100% 0%, calc(100% - 20px) 100%, 0% 100%); }

    .toggle-button { cursor: pointer; color: #ffff00; font-weight: 900; letter-spacing: 1px; }

    @media(max-width: 768px){
        .timeline-item { flex-direction: column; align-items: flex-start; }
        .current-time { font-size: 2.2rem; letter-spacing: 3px; }
        h1 { letter-spacing: 2px; }
    }
</style>
</head>
<body>

<h1>Vue du Jour</h1>
<div class="current-time" id="current-time">00:00</div>

<div class="progress-container">
    <div class="progress-bar" id="progress-bar"></div>
</div>

<div class="current-activity" id="current-activity">
    <h2>Activité en cours</h2>
    <p id="current-activity-text">Chargement...</p>
</div>

<div class="toggle-button" id="toggle-timeline">Afficher / Masquer la liste des activités</div>
<div class="timeline" id="timeline"></div>

<div class="widget-container">
    <iframe src="https://indify.co/widgets/live/calendar/EZcMbUI9HBUDk6IVjoMb" height="240"></iframe>
</div>

<a class="planning-button" href="https://ade-planning.polytech.universite-paris-saclay.fr/direct/?data=95e000515dff41bf090dab728096f2e573fcc9d06b8b96dc3d93d2cb352384cbd00d9c13ec0fd521cac74b6bf5c833e330bd1419659aefba2515ad45d7d6b2e60a177ea3fca78ebb8d09fcc527c2eb35c5c1eac4c431ea42a7b539b6ae09851fc8a517a39539834b65d418562645b25f6bed5e6629c39c1c84424e4705c803ab,1" target="_blank">Voir le planning Polytech</a>

<script>
const activities = [
    { start: '06:50', end: '07:15', label: 'Prière + sac + petit dej' },
    { start: '07:15', end: '08:15', label: 'Trajet école' },
    { start: '08:15', end: '17:45', label: 'Cours' },
    { start: '17:45', end: '18:45', label: 'Trajet retour' },
    { start: '18:45', end: '19:05', label: 'Pause libre + sport d’appartement' },
    { start: '19:05', end: '20:00', label: 'Bloc productif' },
    { start: '20:00', end: '21:25', label: 'Dîner + détente' },
    { start: '21:25', end: '21:30', label: 'Feedback du jour' },
    { start: '21:30', end: '22:15', label: 'Détente hors écran' },
    { start: '22:15', end: '23:00', label: 'Coucher' }
];

const timelineEl = document.getElementById('timeline');
const progressBar = document.getElementById('progress-bar');
const currentActivityText = document.getElementById('current-activity-text');
const currentTimeEl = document.getElementById('current-time');
const toggleTimelineBtn = document.getElementById('toggle-timeline');

function timeToMinutes(t) {
    const [h, m] = t.split(':').map(Number);
    return h * 60 + m;
}

function updateTimeline() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2,'0');
    const minutes = now.getMinutes().toString().padStart(2,'0');
    currentTimeEl.textContent = `${hours}:${minutes}`;

    const currentMinutes = now.getHours() * 60 + now.getMinutes();

    const dayStart = timeToMinutes('06:50');
    const dayEnd = timeToMinutes('22:15');
    let progress = ((currentMinutes - dayStart) / (dayEnd - dayStart)) * 100;
    progress = Math.min(Math.max(progress, 0), 100);
    progressBar.style.width = progress + '%';

    let currentActivity = 'Aucune activité';
    activities.forEach(act => {
        if(currentMinutes >= timeToMinutes(act.start) && currentMinutes < timeToMinutes(act.end)) {
            currentActivity = `${act.label} (${act.start} - ${act.end})`;
        }
    });
    currentActivityText.textContent = currentActivity;

    timelineEl.innerHTML = '';
    activities.forEach(act => {
        const item = document.createElement('div');
        item.className = 'timeline-item';
        item.innerHTML = `<span>${act.start} - ${act.end}</span><span>${act.label}</span>`;
        timelineEl.appendChild(item);
    });
}

updateTimeline();
setInterval(updateTimeline, 60000);

toggleTimelineBtn.addEventListener('click', () => {
    if(timelineEl.style.display === 'none' || timelineEl.style.display === '') {
        timelineEl.style.display = 'flex';
        timelineEl.scrollIntoView({behavior: 'smooth', block: 'end'});
    } else {
        timelineEl.style.display = 'none';
    }
});
</script>
</body>
</html>

